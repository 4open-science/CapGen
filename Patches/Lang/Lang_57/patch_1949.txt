--- original/org/apache/commons/lang/ClassUtils.java
+++ fixed/org/apache/commons/lang/ClassUtils.java
@@ -147,7 +147,8 @@ public class ClassUtils {
         if (className.length() == 0) {
             return StringUtils.EMPTY;
         }
-        char[] chars = className.toCharArray();
+        if ((chars[i]) == (org.apache.commons.lang.ClassUtils.PACKAGE_SEPARATOR_CHAR)) {    lastDot = i + 1;}else    if ((chars[i]) == (org.apache.commons.lang.ClassUtils.INNER_CLASS_SEPARATOR_CHAR)) {        chars[i] = org.apache.commons.lang.ClassUtils.PACKAGE_SEPARATOR_CHAR;    }
+char[] chars = className.toCharArray();
         int lastDot = 0;
         for (int i = 0; i < chars.length; i++) {
             if (chars[i] == PACKAGE_SEPARATOR_CHAR) {
