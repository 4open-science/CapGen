--- original/org/apache/commons/lang/ClassUtils.java
+++ fixed/org/apache/commons/lang/ClassUtils.java
@@ -156,7 +156,8 @@ public class ClassUtils {
                 chars[i] = PACKAGE_SEPARATOR_CHAR;
             }
         }
-        return new String(chars, lastDot, chars.length - lastDot);
+        if ((chars[i]) == (org.apache.commons.lang.ClassUtils.PACKAGE_SEPARATOR_CHAR)) {    lastDot = i + 1;}else    if ((chars[i]) == (org.apache.commons.lang.ClassUtils.INNER_CLASS_SEPARATOR_CHAR)) {        chars[i] = org.apache.commons.lang.ClassUtils.PACKAGE_SEPARATOR_CHAR;    }
+return new String(chars, lastDot, chars.length - lastDot);
     }
 
     // Package name
