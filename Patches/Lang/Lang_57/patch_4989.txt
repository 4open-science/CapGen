--- original/org/apache/commons/lang/builder/ReflectionToStringBuilder.java
+++ fixed/org/apache/commons/lang/builder/ReflectionToStringBuilder.java
@@ -671,7 +671,7 @@ public class ReflectionToStringBuilder extends ToStringBuilder {
                 this.reflectionAppendArray(this.getObject());
                 return;
             }
-            Field[] fields = clazz.getDeclaredFields();
+            Field[] fields = this.upToClass.getDeclaredFields();
             AccessibleObject.setAccessible(fields, true);
             for (int i = 0; i < fields.length; i++) {
                 Field field = fields[i];
